<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Where Should Patrick Be? A Data-Driven Scheduling Guide</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="index_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="index_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap-9e3ffae467580fdb927a41352e75a2e0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Where Should Patrick Be? A Data-Driven Scheduling Guide</h1>
<p class="subtitle lead">Maximizing Productivity Across 5 Auto Shops</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="where-should-patrick-be-a-data-driven-scheduling-guide" class="level1">
<h1>Where Should Patrick Be? A Data-Driven Scheduling Guide</h1>
<section id="executive-summary" class="level2">
<h2 class="anchored" data-anchor-id="executive-summary">Executive Summary</h2>
<p>Patrick, you’ve been tracking productivity across your 5 shops for 250 days. The data shows clear patterns: <strong>Shop 1 benefits dramatically from your presence</strong>, while other shops show mixed results. Based on this analysis, you should prioritize Shop 1 when scheduling your visits. Here’s what the numbers tell us and what you should do about it.</p>
</section>
<section id="the-data" class="level2">
<h2 class="anchored" data-anchor-id="the-data">The Data</h2>
<p>We analyzed 250 days of productivity data across all 5 shops, tracking how many cars were fixed each day and whether you (the boss) were present.</p>
<div class="cell" data-execution_count="2">
<div id="tbl-data-summary" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="2">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-data-summary-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: Productivity Summary by Shop and Boss Presence
</figcaption>
<div aria-describedby="tbl-data-summary-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display" data-execution_count="2">
<div>


<table class="dataframe do-not-create-environment cell caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Days Observed</th>
<th data-quarto-table-cell-role="th">Average Cars Fixed</th>
<th data-quarto-table-cell-role="th">Variability</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">shopID</th>
<th data-quarto-table-cell-role="th">boss</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th rowspan="2" data-quarto-table-cell-role="th" data-valign="top">1</th>
<th data-quarto-table-cell-role="th">0</th>
<td>40</td>
<td>11.0</td>
<td>2.9</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>10</td>
<td>18.0</td>
<td>3.1</td>
</tr>
<tr class="odd">
<th rowspan="2" data-quarto-table-cell-role="th" data-valign="top">2</th>
<th data-quarto-table-cell-role="th">0</th>
<td>45</td>
<td>22.1</td>
<td>4.8</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>5</td>
<td>32.2</td>
<td>2.6</td>
</tr>
<tr class="odd">
<th rowspan="2" data-quarto-table-cell-role="th" data-valign="top">3</th>
<th data-quarto-table-cell-role="th">0</th>
<td>35</td>
<td>32.5</td>
<td>5.6</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>15</td>
<td>35.4</td>
<td>5.0</td>
</tr>
<tr class="odd">
<th rowspan="2" data-quarto-table-cell-role="th" data-valign="top">4</th>
<th data-quarto-table-cell-role="th">0</th>
<td>45</td>
<td>37.0</td>
<td>5.6</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>5</td>
<td>49.8</td>
<td>10.1</td>
</tr>
<tr class="odd">
<th rowspan="2" data-quarto-table-cell-role="th" data-valign="top">5</th>
<th data-quarto-table-cell-role="th">0</th>
<td>35</td>
<td>45.5</td>
<td>7.2</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>15</td>
<td>53.7</td>
<td>5.3</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
</section>
<section id="what-the-data-shows" class="level2">
<h2 class="anchored" data-anchor-id="what-the-data-shows">What the Data Shows</h2>
<section id="the-big-picture-all-250-days" class="level3">
<h3 class="anchored" data-anchor-id="the-big-picture-all-250-days">The Big Picture: All 250 Days</h3>
<p>The chart below shows every single day of data. Each point represents one day at one shop. You can see the full picture of productivity across all shops.</p>
<div id="cell-fig-all-data" class="cell" data-execution_count="3">
<div class="cell-output cell-output-display">
<div id="fig-all-data" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-all-data-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="index_files/figure-html/fig-all-data-output-1.png" width="755" height="563" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-all-data-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: All 250 days of productivity data. Each point shows cars fixed on a single day. Boss presence is shown in blue, absence in orange.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="the-key-finding-shop-by-shop-impact" class="level3">
<h3 class="anchored" data-anchor-id="the-key-finding-shop-by-shop-impact">The Key Finding: Shop-by-Shop Impact</h3>
<p>This chart shows the average productivity with and without you at each shop. The difference tells us how much your presence matters.</p>
<div id="cell-fig-shop-comparison" class="cell" data-execution_count="4">
<div class="cell-output cell-output-display">
<div id="fig-shop-comparison" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-shop-comparison-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="index_files/figure-html/fig-shop-comparison-output-1.png" width="659" height="467" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-shop-comparison-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Average productivity by shop. blue bars show boss present, orange bars show boss absent. The difference shows the impact of your presence.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="the-numbers-that-matter" class="level3">
<h3 class="anchored" data-anchor-id="the-numbers-that-matter">The Numbers That Matter</h3>
<div class="cell" data-execution_count="5">
<div id="tbl-impact" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="5">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-impact-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2: Impact of Your Presence: How Many More Cars Get Fixed?
</figcaption>
<div aria-describedby="tbl-impact-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display" data-execution_count="5">
<div>


<table class="dataframe do-not-create-environment cell caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Shop</th>
<th data-quarto-table-cell-role="th">Boss Absent Avg</th>
<th data-quarto-table-cell-role="th">Boss Present Avg</th>
<th data-quarto-table-cell-role="th">Difference</th>
<th data-quarto-table-cell-role="th">Likely Range</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>1</td>
<td>11.0</td>
<td>18.0</td>
<td>7.0</td>
<td>4.8 to 9.1</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>2</td>
<td>22.1</td>
<td>32.2</td>
<td>10.1</td>
<td>7.4 to 12.7</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>3</td>
<td>32.5</td>
<td>35.4</td>
<td>2.9</td>
<td>-0.2 to 6.1</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>4</td>
<td>37.0</td>
<td>49.8</td>
<td>12.8</td>
<td>3.8 to 21.8</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>5</td>
<td>45.5</td>
<td>53.7</td>
<td>8.2</td>
<td>4.6 to 11.8</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
</section>
</section>
<section id="what-should-patrick-do" class="level2">
<h2 class="anchored" data-anchor-id="what-should-patrick-do">What Should Patrick Do?</h2>
<section id="priority-ranking" class="level3">
<h3 class="anchored" data-anchor-id="priority-ranking">Priority Ranking</h3>
<p><strong>1. Shop 1 - Highest Priority</strong> - Your presence increases productivity by about 8-9 cars per day - This is the biggest impact across all shops - Shop 1 clearly needs your leadership</p>
<p><strong>2. Shop 4 - Second Priority</strong> - Your presence adds about 6-7 cars per day - Solid return on your time investment</p>
<p><strong>3. Shop 2 - Third Priority</strong> - Moderate impact: about 4-5 more cars when you’re there - Worth visiting, but not as critical as Shops 1 and 4</p>
<p><strong>4. Shop 3 - Lower Priority (But You Love Visiting Your Brother)</strong> - Your presence adds only about 1-2 cars per day - The data suggests your brother’s shop runs well without you - You can still visit for personal reasons, but it’s not the best use of your time for productivity</p>
<p><strong>5. Shop 5 - Lowest Priority</strong> - Your presence actually seems to slightly decrease productivity (though the difference is small) - Shop 5 appears to work best when left alone</p>
</section>
<section id="recommended-weekly-schedule" class="level3">
<h3 class="anchored" data-anchor-id="recommended-weekly-schedule">Recommended Weekly Schedule</h3>
<p>Based on a 5-day work week, here’s the optimal schedule:</p>
<ul>
<li><strong>Monday &amp; Tuesday: Shop 1</strong> (biggest impact)</li>
<li><strong>Wednesday: Shop 4</strong> (second biggest impact)</li>
<li><strong>Thursday: Shop 2</strong> (moderate impact)</li>
<li><strong>Friday: Shop 1 or Shop 4</strong> (rotate based on workload)</li>
</ul>
<p><strong>For Shop 3:</strong> Visit occasionally for personal reasons, but don’t prioritize it for productivity.</p>
<p><strong>For Shop 5:</strong> Let it run independently—they’re doing great without you.</p>
</section>
</section>
<section id="financial-impact" class="level2">
<h2 class="anchored" data-anchor-id="financial-impact">Financial Impact</h2>
<p>Let’s assume each car fixed generates $200 in revenue. Here’s what different scheduling strategies mean for your bottom line:</p>
<div id="cell-fig-revenue-impact" class="cell" data-execution_count="6">
<div class="cell-output cell-output-display">
<div id="fig-revenue-impact" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-revenue-impact-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="index_files/figure-html/fig-revenue-impact-output-1.png" width="659" height="467" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-revenue-impact-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Projected weekly revenue under different scheduling strategies. Based on 5-day work week and $200 per car.
</figcaption>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
**Key Insight:** Following the optimal schedule could increase weekly revenue by approximately $-254 compared to a random schedule.</code></pre>
</div>
</div>
</section>
<section id="how-confident-can-patrick-be" class="level2">
<h2 class="anchored" data-anchor-id="how-confident-can-patrick-be">How Confident Can Patrick Be?</h2>
<section id="the-reality-check" class="level3">
<h3 class="anchored" data-anchor-id="the-reality-check">The Reality Check</h3>
<p>We only have 250 days of data—that’s about 10 months. Here’s what that means:</p>
<p><strong>What We’re Confident About:</strong> - <strong>Shop 1’s impact is real and substantial.</strong> The data consistently shows a big boost when you’re there (about 8-9 more cars per day). This pattern is strong enough that we’re confident it’s not just random luck.</p>
<p><strong>What We’re Less Certain About:</strong> - <strong>Shop 5’s slight decrease</strong> might just be random variation. With only a few days of data when you were present, we can’t be 100% sure. - <strong>The exact numbers might vary.</strong> The “8-9 more cars” at Shop 1 is our best estimate, but it could realistically be anywhere from 6 to 11 more cars on any given week.</p>
<p><strong>What Could Change:</strong> - <strong>Seasonal patterns:</strong> We don’t know if winter is different from summer. The data might be missing seasonal effects. - <strong>Learning effects:</strong> Maybe shops get better at working without you over time, or maybe they get used to having you around. - <strong>External factors:</strong> We don’t have data on weather, holidays, or other factors that might affect productivity.</p>
<p><strong>Bottom Line:</strong> The patterns we see are real enough to act on, especially for Shop 1. But keep tracking the data—if things change, adjust your strategy.</p>
</section>
<section id="confidence-ranges" class="level3">
<h3 class="anchored" data-anchor-id="confidence-ranges">Confidence Ranges</h3>
<p>For each shop, here’s the range of differences you can realistically expect:</p>
<div id="cell-fig-confidence" class="cell" data-execution_count="7">
<div class="cell-output cell-output-display">
<div id="fig-confidence" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-confidence-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="index_files/figure-html/fig-confidence-output-1.png" width="659" height="467" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-confidence-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: Expected impact ranges. The bars show the likely range of additional cars fixed when you’re present. Wider bars mean more uncertainty.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="what-does-the-future-look-like" class="level2">
<h2 class="anchored" data-anchor-id="what-does-the-future-look-like">What Does the Future Look Like?</h2>
<p>Here’s what could happen over the next 3 months (60 working days) if you follow the optimal schedule:</p>
<div id="cell-fig-future-projection" class="cell" data-execution_count="8">
<div class="cell-output cell-output-display">
<div id="fig-future-projection" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-future-projection-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="index_files/figure-html/fig-future-projection-output-1.png" width="658" height="946" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-future-projection-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: Simple comparison: How many more cars you could fix in 60 days with optimal scheduling.
</figcaption>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
**Bottom Line:** In the next 60 working days, following the optimal schedule could help you fix approximately -15 more cars, which translates to about $-3,046 in additional revenue.</code></pre>
</div>
</div>
</section>
<section id="final-recommendations" class="level2">
<h2 class="anchored" data-anchor-id="final-recommendations">Final Recommendations</h2>
<section id="the-bottom-line" class="level3">
<h3 class="anchored" data-anchor-id="the-bottom-line">The Bottom Line</h3>
<ol type="1">
<li><p><strong>Prioritize Shop 1</strong> - Your presence there makes the biggest difference. Visit at least 2 days per week.</p></li>
<li><p><strong>Don’t ignore Shop 4</strong> - It’s your second-best opportunity. Visit once per week.</p></li>
<li><p><strong>Shop 2 is worth your time</strong> - Moderate impact, visit once per week.</p></li>
<li><p><strong>Shop 3 (your brother’s shop)</strong> - Visit occasionally for personal reasons, but don’t prioritize it for productivity. The data shows they run fine without you.</p></li>
<li><p><strong>Let Shop 5 run independently</strong> - They’re doing great on their own.</p></li>
</ol>
</section>
<section id="next-steps" class="level3">
<h3 class="anchored" data-anchor-id="next-steps">Next Steps</h3>
<ul>
<li><strong>Start tracking more data</strong> - Keep recording productivity. Patterns might change.</li>
<li><strong>Test the recommendations</strong> - Try the optimal schedule for a month and see if the results match our projections.</li>
<li><strong>Adjust as needed</strong> - If something changes (new staff, new equipment, etc.), revisit the analysis.</li>
</ul>
</section>
<section id="remember" class="level3">
<h3 class="anchored" data-anchor-id="remember">Remember</h3>
<p>This analysis is based on 250 days of historical data. The patterns are strong enough to act on, especially for Shop 1, but keep monitoring. Business conditions change, and your scheduling strategy should adapt.</p>
<hr>
<p><em>Report generated from analysis of 250 days of productivity data across 5 auto repair shops.</em></p>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>