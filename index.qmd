---
title: "Where Should Patrick Be? A Data-Driven Scheduling Guide"
subtitle: "Maximizing Productivity Across 5 Auto Shops"
format:
  html: default
execute:
  echo: false
  eval: true
---

# Where Should Patrick Be? A Data-Driven Scheduling Guide

## Executive Summary

Patrick, you've been tracking productivity across your 5 shops for 250 days. The data shows clear patterns: **Shop 1 benefits dramatically from your presence**, while other shops show mixed results. Based on this analysis, you should prioritize Shop 1 when scheduling your visits. Here's what the numbers tell us and what you should do about it.

## The Data

We analyzed 250 days of productivity data across all 5 shops, tracking how many cars were fixed each day and whether you (the boss) were present.

```{python}
#| echo: false
#| include: false
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns

# Set style for professional plots
sns.set_style("whitegrid")
plt.rcParams['figure.figsize'] = (7, 5)
plt.rcParams['font.size'] = 11

# Load the data
carsDF = pd.read_csv("carsFixed.csv")

# Create a readable boss status column
carsDF['Boss Status'] = carsDF['boss'].map({0: 'Boss Absent', 1: 'Boss Present'})
```

```{python}
#| label: tbl-data-summary
#| tbl-cap: "Productivity Summary by Shop and Boss Presence"
#| echo: false
summary = carsDF.groupby(['shopID', 'boss'])['carsFixed'].agg(['count', 'mean', 'std']).round(1)
summary.columns = ['Days Observed', 'Average Cars Fixed', 'Variability']
summary
```

## What the Data Shows

### The Big Picture: All 250 Days

The chart below shows every single day of data. Each point represents one day at one shop. You can see the full picture of productivity across all shops.

```{python}
#| label: fig-all-data
#| fig-cap: "All 250 days of productivity data. Each point shows cars fixed on a single day. Boss presence is shown in blue, absence in orange."
#| echo: false
fig, ax = plt.subplots(figsize=(8, 6))

# Create jittered positions for better visibility
np.random.seed(42)
for shop in range(1, 6):
    shop_data = carsDF[carsDF['shopID'] == shop]
    
    # Boss absent
    absent_data = shop_data[shop_data['boss'] == 0]
    x_absent = np.random.normal(shop - 0.15, 0.05, len(absent_data))
    ax.scatter(x_absent, absent_data['carsFixed'], 
               alpha=0.6, s=50, color='#FF6B35', label='Boss Absent' if shop == 1 else '')
    
    # Boss present
    present_data = shop_data[shop_data['boss'] == 1]
    x_present = np.random.normal(shop + 0.15, 0.05, len(present_data))
    ax.scatter(x_present, present_data['carsFixed'], 
               alpha=0.7, s=60, color='#004E89', label='Boss Present' if shop == 1 else '')

ax.set_xlabel('Shop Number', fontsize=12, fontweight='bold')
ax.set_ylabel('Cars Fixed Per Day', fontsize=12, fontweight='bold')
ax.set_title('Productivity Across All Shops: Every Day of Data', fontsize=14, fontweight='bold', pad=20)
ax.set_xticks(range(1, 6))
ax.set_xticklabels([f'Shop {i}' for i in range(1, 6)])
ax.legend(loc='upper left', fontsize=11)
ax.grid(True, alpha=0.3)
plt.tight_layout()
plt.show()
```

### The Key Finding: Shop-by-Shop Impact

This chart shows the average productivity with and without you at each shop. The difference tells us how much your presence matters.

```{python}
#| label: fig-shop-comparison
#| fig-cap: "Average productivity by shop. blue bars show boss present, orange bars show boss absent. The difference shows the impact of your presence."
#| echo: false
shop_means = carsDF.groupby(['shopID', 'boss'])['carsFixed'].mean().reset_index()
shop_means_pivot = shop_means.pivot(index='shopID', columns='boss', values='carsFixed')
shop_means_pivot.columns = ['Boss Absent', 'Boss Present']

fig, ax = plt.subplots(figsize=(7, 5))
x = np.arange(1, 6)
width = 0.35

bars1 = ax.bar(x - width/2, shop_means_pivot['Boss Absent'], width, 
               label='Boss Absent', color='#FF6B35', alpha=0.8)
bars2 = ax.bar(x + width/2, shop_means_pivot['Boss Present'], width, 
               label='Boss Present', color='#004E89', alpha=0.8)

# Add value labels on bars
for bars in [bars1, bars2]:
    for bar in bars:
        height = bar.get_height()
        ax.text(bar.get_x() + bar.get_width()/2., height,
                f'{height:.1f}',
                ha='center', va='bottom', fontsize=10, fontweight='bold')

ax.set_xlabel('Shop Number', fontsize=12, fontweight='bold')
ax.set_ylabel('Average Cars Fixed Per Day', fontsize=12, fontweight='bold')
ax.set_title('Your Presence Makes the Biggest Difference at Shop 1', fontsize=14, fontweight='bold', pad=20)
ax.set_xticks(x)
ax.set_xticklabels([f'Shop {i}' for i in range(1, 6)])
ax.legend(loc='upper left', fontsize=11)
ax.grid(True, alpha=0.3, axis='y')
plt.tight_layout()
plt.show()
```

### The Numbers That Matter

```{python}
#| label: tbl-impact
#| tbl-cap: "Impact of Your Presence: How Many More Cars Get Fixed?"
#| echo: false
impact = []
for shop in range(1, 6):
    shop_data = carsDF[carsDF['shopID'] == shop]
    absent_mean = shop_data[shop_data['boss'] == 0]['carsFixed'].mean()
    present_mean = shop_data[shop_data['boss'] == 1]['carsFixed'].mean()
    difference = present_mean - absent_mean
    absent_count = len(shop_data[shop_data['boss'] == 0])
    present_count = len(shop_data[shop_data['boss'] == 1])
    
    # Calculate confidence interval manually
    absent_data = shop_data[shop_data['boss'] == 0]['carsFixed']
    present_data = shop_data[shop_data['boss'] == 1]['carsFixed']
    
    # Standard error for difference
    se_diff = np.sqrt(absent_data.std()**2/len(absent_data) + present_data.std()**2/len(present_data))
    ci_lower = difference - 1.96 * se_diff
    ci_upper = difference + 1.96 * se_diff
    
    impact.append({
        'Shop': shop,
        'Boss Absent Avg': round(absent_mean, 1),
        'Boss Present Avg': round(present_mean, 1),
        'Difference': round(difference, 1),
        'Likely Range': f"{round(ci_lower, 1)} to {round(ci_upper, 1)}"
    })

impact_df = pd.DataFrame(impact)
impact_df
```

## What Should Patrick Do?

### Priority Ranking

**1. Shop 1 - Highest Priority**
- Your presence increases productivity by about 8-9 cars per day
- This is the biggest impact across all shops
- Shop 1 clearly needs your leadership

**2. Shop 4 - Second Priority**
- Your presence adds about 6-7 cars per day
- Solid return on your time investment

**3. Shop 2 - Third Priority**
- Moderate impact: about 4-5 more cars when you're there
- Worth visiting, but not as critical as Shops 1 and 4

**4. Shop 3 - Lower Priority (But You Love Visiting Your Brother)**
- Your presence adds only about 1-2 cars per day
- The data suggests your brother's shop runs well without you
- You can still visit for personal reasons, but it's not the best use of your time for productivity

**5. Shop 5 - Lowest Priority**
- Your presence actually seems to slightly decrease productivity (though the difference is small)
- Shop 5 appears to work best when left alone

### Recommended Weekly Schedule

Based on a 5-day work week, here's the optimal schedule:

- **Monday & Tuesday: Shop 1** (biggest impact)
- **Wednesday: Shop 4** (second biggest impact)
- **Thursday: Shop 2** (moderate impact)
- **Friday: Shop 1 or Shop 4** (rotate based on workload)

**For Shop 3:** Visit occasionally for personal reasons, but don't prioritize it for productivity.

**For Shop 5:** Let it run independently—they're doing great without you.

## Financial Impact

Let's assume each car fixed generates $200 in revenue. Here's what different scheduling strategies mean for your bottom line:

```{python}
#| label: fig-revenue-impact
#| fig-cap: "Projected weekly revenue under different scheduling strategies. Based on 5-day work week and $200 per car."
#| echo: false
# Calculate daily averages
shop_avg_absent = carsDF.groupby(['shopID', 'boss'])['carsFixed'].mean().reset_index()
shop_avg_absent = shop_avg_absent[shop_avg_absent['boss'] == 0].set_index('shopID')['carsFixed']
shop_avg_present = carsDF.groupby(['shopID', 'boss'])['carsFixed'].mean().reset_index()
shop_avg_present = shop_avg_present[shop_avg_present['boss'] == 1].set_index('shopID')['carsFixed']

# Scenario 1: Current (random) - assume boss visits each shop 1 day per week
current_weekly = (shop_avg_absent.sum() * 4 + shop_avg_present.sum() * 1) * 200

# Scenario 2: Optimal - focus on Shops 1, 4, 2
optimal_schedule = {
    1: 2,  # Shop 1: 2 days
    4: 1,  # Shop 4: 1 day
    2: 1,  # Shop 2: 1 day
    3: 1,  # Shop 3: 1 day (brother visit)
    5: 0   # Shop 5: 0 days
}
optimal_weekly = sum(
    (shop_avg_present[shop] * days + shop_avg_absent[shop] * (5 - days)) * 200
    for shop, days in optimal_schedule.items()
)

# Scenario 3: Worst case - visit shops that don't benefit
worst_schedule = {
    1: 0,
    4: 0,
    2: 0,
    3: 2,
    5: 3
}
worst_weekly = sum(
    (shop_avg_present[shop] * days + shop_avg_absent[shop] * (5 - days)) * 200
    for shop, days in worst_schedule.items()
)

scenarios = ['Current\n(Random)', 'Optimal\nSchedule', 'Worst Case\nSchedule']
revenues = [current_weekly, optimal_weekly, worst_weekly]

fig, ax = plt.subplots(figsize=(7, 5))
bars = ax.bar(scenarios, revenues, color=['#888888', '#004E89', '#FF6B35'], alpha=0.8)

# Add value labels
for bar in bars:
    height = bar.get_height()
    ax.text(bar.get_x() + bar.get_width()/2., height,
            f'${height:,.0f}',
            ha='center', va='bottom', fontsize=11, fontweight='bold')

ax.set_ylabel('Weekly Revenue ($)', fontsize=12, fontweight='bold')
ax.set_title('Revenue Impact of Different Scheduling Strategies', fontsize=14, fontweight='bold', pad=20)
ax.grid(True, alpha=0.3, axis='y')

# Add difference annotation
diff = optimal_weekly - current_weekly
# Set y-axis limits to accommodate annotation with more padding
y_max = max(revenues) * 1.5
ax.set_ylim(top=y_max)
ax.annotate(f'Potential gain: ${diff:,.0f}/week',
            xy=(1, max(revenues) * 1.25), xytext=(0.5, max(revenues) * 1.35),
            arrowprops=dict(arrowstyle='->', color='blue', lw=2),
            fontsize=11, fontweight='bold', color='blue',
            bbox=dict(boxstyle='round', facecolor='white', alpha=0.8))

plt.tight_layout()
plt.show()

print(f"\n**Key Insight:** Following the optimal schedule could increase "
      f"weekly revenue by approximately ${diff:,.0f} compared to a "
      f"random schedule.")
```

## How Confident Can Patrick Be?

### The Reality Check

We only have 250 days of data—that's about 10 months. Here's what that means:

**What We're Confident About:**
- **Shop 1's impact is real and substantial.** The data consistently shows a big boost when you're there (about 8-9 more cars per day). This pattern is strong enough that we're confident it's not just random luck.

**What We're Less Certain About:**
- **Shop 5's slight decrease** might just be random variation. With only a few days of data when you were present, we can't be 100% sure.
- **The exact numbers might vary.** The "8-9 more cars" at Shop 1 is our best estimate, but it could realistically be anywhere from 6 to 11 more cars on any given week.

**What Could Change:**
- **Seasonal patterns:** We don't know if winter is different from summer. The data might be missing seasonal effects.
- **Learning effects:** Maybe shops get better at working without you over time, or maybe they get used to having you around.
- **External factors:** We don't have data on weather, holidays, or other factors that might affect productivity.

**Bottom Line:** The patterns we see are real enough to act on, especially for Shop 1. But keep tracking the data—if things change, adjust your strategy.

### Confidence Ranges

For each shop, here's the range of differences you can realistically expect:

```{python}
#| label: fig-confidence
#| fig-cap: "Expected impact ranges. The bars show the likely range of additional cars fixed when you're present. Wider bars mean more uncertainty."
#| echo: false
confidence_data = []
for shop in range(1, 6):
    shop_data = carsDF[carsDF['shopID'] == shop]
    absent_data = shop_data[shop_data['boss'] == 0]['carsFixed']
    present_data = shop_data[shop_data['boss'] == 1]['carsFixed']
    
    difference = present_data.mean() - absent_data.mean()
    se_diff = np.sqrt(absent_data.std()**2/len(absent_data) + present_data.std()**2/len(present_data))
    ci_lower = difference - 1.96 * se_diff
    ci_upper = difference + 1.96 * se_diff
    
    confidence_data.append({
        'Shop': shop,
        'Lower': ci_lower,
        'Mean': difference,
        'Upper': ci_upper
    })

conf_df = pd.DataFrame(confidence_data)

fig, ax = plt.subplots(figsize=(7, 5))
x = np.arange(1, 6)

# Plot confidence intervals
for i, row in conf_df.iterrows():
    ax.plot([row['Shop'], row['Shop']], [row['Lower'], row['Upper']], 
            'k-', linewidth=2, alpha=0.7)
    ax.plot(row['Shop'], row['Mean'], 'o', markersize=10, 
            color='#004E89' if row['Mean'] > 0 else '#FF6B35')

ax.axhline(y=0, color='gray', linestyle='--', linewidth=1, alpha=0.5)
ax.set_xlabel('Shop Number', fontsize=12, fontweight='bold')
ax.set_ylabel('Additional Cars Fixed (Boss Present vs Absent)', fontsize=12, fontweight='bold')
ax.set_title('Expected Impact Ranges: What to Realistically Expect', fontsize=14, fontweight='bold', pad=20)
ax.set_xticks(x)
ax.set_xticklabels([f'Shop {i}' for i in range(1, 6)])
ax.grid(True, alpha=0.3, axis='y')

# Add annotations
for i, row in conf_df.iterrows():
    ax.annotate(f"{row['Mean']:.1f}", 
                xy=(row['Shop'], row['Mean']), 
                xytext=(row['Shop'], row['Mean'] + 1.5),
                ha='center', fontsize=10, fontweight='bold')

plt.tight_layout()
plt.show()
```

## What Does the Future Look Like?

Here's what could happen over the next 3 months (60 working days) if you follow the optimal schedule:

```{python}
#| label: fig-future-projection
#| fig-cap: "Simple comparison: How many more cars you could fix in 60 days with optimal scheduling."
#| echo: false
# Calculate daily productivity for each scenario
optimal_daily = (
    shop_avg_present[1] * 0.4 + shop_avg_absent[1] * 0.6 +  # Shop 1: 2/5 days
    shop_avg_present[4] * 0.2 + shop_avg_absent[4] * 0.8 +  # Shop 4: 1/5 days
    shop_avg_present[2] * 0.2 + shop_avg_absent[2] * 0.8 +  # Shop 2: 1/5 days
    shop_avg_present[3] * 0.2 + shop_avg_absent[3] * 0.8 +  # Shop 3: 1/5 days
    shop_avg_absent[5]  # Shop 5: always absent
)

current_daily = (
    shop_avg_present[1] * 0.2 + shop_avg_absent[1] * 0.8 +  # Each shop 1/5 days
    shop_avg_present[2] * 0.2 + shop_avg_absent[2] * 0.8 +
    shop_avg_present[3] * 0.2 + shop_avg_absent[3] * 0.8 +
    shop_avg_present[4] * 0.2 + shop_avg_absent[4] * 0.8 +
    shop_avg_present[5] * 0.2 + shop_avg_absent[5] * 0.8
)

# Calculate totals for 60 days
current_total = current_daily * 60
optimal_total = optimal_daily * 60
extra_cars = optimal_total - current_total
extra_revenue = extra_cars * 200

# Create simple comparison chart
fig, (ax1, ax2) = plt.subplots(2, 1, figsize=(7, 10))

# Chart 1: Total cars fixed comparison
comparisons = ['Current\nApproach', 'Optimal\nSchedule']
totals = [current_total, optimal_total]
colors = ['#888888', '#004E89']

bars = ax1.bar(comparisons, totals, color=colors, alpha=0.8, width=0.6)
ax1.set_ylabel('Total Cars Fixed (60 days)', fontsize=12, fontweight='bold')
ax1.set_title('Total Cars Fixed: 60-Day Comparison', 
              fontsize=14, fontweight='bold', pad=15)
ax1.grid(True, alpha=0.3, axis='y')

# Add value labels on bars
for i, (bar, total) in enumerate(zip(bars, totals)):
    height = bar.get_height()
    ax1.text(bar.get_x() + bar.get_width()/2., height,
            f'{total:.0f} cars',
            ha='center', va='bottom', fontsize=12, fontweight='bold')

# Add difference annotation
ax1.annotate(f'+{extra_cars:.0f} more cars',
            xy=(1, optimal_total), xytext=(0.5, optimal_total * 0.95),
            arrowprops=dict(arrowstyle='->', color='green', lw=2.5),
            fontsize=12, fontweight='bold', color='green',
            bbox=dict(boxstyle='round', facecolor='lightgreen', alpha=0.7))

# Chart 2: Where the extra benefit comes from (sorted by contribution)
# Calculate contribution from each shop over 60 days (12 weeks)
# Current: each shop gets 1 day per week = 12 days total per shop
# Optimal: Shop 1 gets 2 days/week (24 days), Shops 2-4 get 1 day/week (12 days), Shop 5 gets 0 days
shop_data_list = []
for shop in range(1, 6):
    # Days per week in each scenario
    if shop == 1:
        opt_days_per_week = 2
        curr_days_per_week = 1
    elif shop in [2, 3, 4]:
        opt_days_per_week = 1
        curr_days_per_week = 1
    else:  # shop 5
        opt_days_per_week = 0
        curr_days_per_week = 1
    
    # Calculate over 60 days (12 weeks)
    opt_days = opt_days_per_week * 12
    curr_days = curr_days_per_week * 12
    
    # Calculate total cars for each scenario
    opt_cars = (shop_avg_present[shop] * opt_days + 
                shop_avg_absent[shop] * (60 - opt_days))
    curr_cars = (shop_avg_present[shop] * curr_days + 
                 shop_avg_absent[shop] * (60 - curr_days))
    contribution = opt_cars - curr_cars
    
    # Add context about what changed
    days_change = opt_days - curr_days
    shop_data_list.append({
        'shop': f'Shop {shop}',
        'contribution': contribution,
        'revenue': contribution * 200,
        'days_change': days_change
    })

# Sort by contribution (highest first)
shop_data_list.sort(key=lambda x: x['contribution'], reverse=True)

shop_names_sorted = [item['shop'] for item in shop_data_list]
contributions_sorted = [item['contribution'] for item in shop_data_list]
colors_contrib = ['#004E89' if x > 0 else '#FF6B35' if x < 0 else '#888888' 
                  for x in contributions_sorted]

bars2 = ax2.barh(shop_names_sorted, contributions_sorted, color=colors_contrib, 
                 alpha=0.8, height=0.6)
ax2.set_xlabel('Extra Cars Fixed (60 days)', fontsize=12, fontweight='bold')
ax2.set_title('Shop Contributions: Where the Extra Benefit Comes From\n'
              '(Shops 2-4 show zero: same allocation in both schedules)', 
              fontsize=14, fontweight='bold', pad=15)
ax2.axvline(x=0, color='black', linestyle='-', linewidth=1)
ax2.grid(True, alpha=0.3, axis='x')

# Add value labels on bars with context
for i, (bar, value, shop_item) in enumerate(zip(bars2, contributions_sorted, 
                                                 sorted(shop_data_list, 
                                                        key=lambda x: x['contribution'], 
                                                        reverse=True))):
    width = bar.get_width()
    days_change = shop_item['days_change']
    
    # Create label with context
    if abs(value) < 0.1:  # Essentially zero
        label_text = 'No change\n(same days)'
    elif days_change > 0:
        label_text = f'{value:+.0f} cars\n(+{days_change} days)'
    elif days_change < 0:
        label_text = f'{value:+.0f} cars\n({days_change} days)'
    else:
        label_text = f'{value:+.0f} cars'
    
    label_x = width + (max(contributions_sorted) * 0.02 if width > 0 
                       else -max(abs(x) for x in contributions_sorted) * 0.02)
    ax2.text(label_x, bar.get_y() + bar.get_height()/2.,
            label_text,
            ha='left' if width > 0 else 'right', va='center', 
            fontsize=10, fontweight='bold',
            bbox=dict(boxstyle='round', facecolor='white', alpha=0.9, pad=4))

plt.tight_layout()
plt.show()

print(f"\n**Bottom Line:** In the next 60 working days, following the optimal "
      f"schedule could help you fix approximately {extra_cars:.0f} more cars, "
      f"which translates to about ${extra_revenue:,.0f} in additional revenue.")
```

## Final Recommendations

### The Bottom Line

1. **Prioritize Shop 1** - Your presence there makes the biggest difference. Visit at least 2 days per week.

2. **Don't ignore Shop 4** - It's your second-best opportunity. Visit once per week.

3. **Shop 2 is worth your time** - Moderate impact, visit once per week.

4. **Shop 3 (your brother's shop)** - Visit occasionally for personal reasons, but don't prioritize it for productivity. The data shows they run fine without you.

5. **Let Shop 5 run independently** - They're doing great on their own.

### Next Steps

- **Start tracking more data** - Keep recording productivity. Patterns might change.
- **Test the recommendations** - Try the optimal schedule for a month and see if the results match our projections.
- **Adjust as needed** - If something changes (new staff, new equipment, etc.), revisit the analysis.

### Remember

This analysis is based on 250 days of historical data. The patterns are strong enough to act on, especially for Shop 1, but keep monitoring. Business conditions change, and your scheduling strategy should adapt.

---

*Report generated from analysis of 250 days of productivity data across 5 auto repair shops.*
